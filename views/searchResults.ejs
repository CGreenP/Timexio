<%- include('partials/navbar.ejs') %>
<main>
    <div class="row mt-5">
        <div class="col-sm-6 col-md-3 border-right pr-5">
            <%- include('./partials/sidebar.ejs') %>
        </div>
        <div class="col-sm-6 col-md-9 pl-sm-5 mt-5 mt-sm-0">
            <h1>Showing results for "<%= searchKeywords %>"</h1>
            <% if (products.length > 0) { %>
                <p>Showing 1-10 results from "<%= products.length %>" products</p>    
                
            <% } %>
            <hr>
            <div class="row mt-5">
                <div class="col-12 text-center">
                    <% if (products.length === 0) { %>
                        <div class="m-5 p-5">
                            <h3 class="m-auto text-muted">Nothing found as "<%= searchKeywords %>"</h3>
                        </div>
                    <% } %>
                </div>
                <% products.forEach(product => { %>
                    <div class="col-sm-2 col-md-4 col-lg-3">
                        <div class="p-1 border-bottom" style="min-height: 100%;">
                            <a href="/product/<%= product._id %>/details">
                                <div class="single-new-pro mb-30 text-center <%= product.quantity < 1 ? 'product-unavailable' : '' %>">
                                    <div class="product-img" style="height: 100%;">
                                        <img src="<%= product.images[0] %>" alt="product image"/>
                                    </div>
                                    <div class="product-caption">
                                        <h6>
                                            <%= product.name %>
                                        </h6>
                                        <% if (product.quantity < 1) { %>
                                            <h5 class="text-danger">Sold Out</h5>
                                        <% } else { %>
                                            <h3><small>&#8377;</small><%= (product.price + ((product.tax/100)*product.price)).toLocaleString() %></h3>
                                        <% } %>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div> 
                <% }) %>
            </div>
        </div>
    </div>
</main>
<%- include('./partials/footer.ejs') %> 
<%- include('./partials/search-box.ejs') %>